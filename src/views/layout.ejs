<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.10.2/umd/popper.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>
</head>

<body>
    <div><%- include('./header.ejs') %></div>
    <div id="banner" <% if(locals?.loggedOut) { %> style="display: none;" <%}%>>
        <h1><%= locals.isAdmin ? "Administrator Role" : "User Role" %> <h6><div id="logout-btn" class="btn badge bg-secondary rounded-pill" onclick="logout()"><i
            class="fa fa-sign-out" aria-hidden="true"></i>Log Out</div><span class="badge bg-secondary rounded-pill">Logged in as '<%= locals?.loggedInUserData?.username %>'</span></h6>
        </h1>
    </div>
    
    <%- body -%><div><%- include('./footer.ejs') %></div>
    
    <script type="text/javascript">
    function logout() {
        const xhr = new XMLHttpRequest();
        xhr.open('GET',window.location.protocol + '//logout:now@' + window.location.host+'/settings/users');
        xhr.send();        
        xhr.onreadystatechange = function() {
            window.location.href = window.location.protocol + '//logout:now@' + window.location.host+'/logged-out';
        }
    }
    </script>
</body>

</html>